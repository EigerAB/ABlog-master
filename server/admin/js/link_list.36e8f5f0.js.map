{"version":3,"sources":["webpack:///./src/views/UserList.vue?4cde","webpack:///src/views/UserList.vue","webpack:///./src/views/UserList.vue?7e70","webpack:///./src/views/UserList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","sendEmail","slot","_v","tableData","handleSelectionChange","scopedSlots","_u","key","fn","scope","row","avatarImg","$event","deleteHandle","dialogVisible","ref","form","formRules","model","value","callback","$$v","$set","expression","sendhandle","staticRenderFns","title","multipleSelection","emailArr","sendContent","getList","methods","res","$http","get","data","$confirm","nickName","confirmButtonText","cancelButtonText","type","then","async","delete","_id","$message","message","catch","val","map","v","email","subject","length","warning","promiseArr","forEach","e","replyObj","recipient","html","push","post","Promise","all","component"],"mappings":"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","file":"js/link_list.36e8f5f0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('m-top-handle',{attrs:{\"title\":\"昵称\",\"content\":\"新建用户\"}},[_c('el-button',{staticClass:\"fr\",attrs:{\"slot\":\"email\",\"type\":\"primary\"},on:{\"click\":_vm.sendEmail},slot:\"email\"},[_vm._v(\" 推送邮件 \")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"_id\",\"label\":\"id\"}}),_c('el-table-column',{attrs:{\"prop\":\"avatarImg\",\"label\":\"头像\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.avatarImg,\"alt\":\"\",\"height\":\"50\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"nickName\",\"label\":\"昵称\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"博客/github网址\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"90\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.deleteHandle(scope.row)}}},[_vm._v(\" 删除 \")])]}}])}),_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}})],1),_c('el-dialog',{attrs:{\"title\":\"上传文件\",\"visible\":_vm.dialogVisible,\"width\":\"320px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.formRules}},[_c('el-form-item',{attrs:{\"props\":\"sendContent\",\"label\":\"发送内容\"}},[_c('el-input',{model:{value:(_vm.form.sendContent),callback:function ($$v) {_vm.$set(_vm.form, \"sendContent\", $$v)},expression:\"form.sendContent\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendhandle}},[_vm._v(\"提交\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <m-top-handle title=\"昵称\" content=\"新建用户\">\n      <el-button class=\"fr\" slot=\"email\" type=\"primary\" @click=\"sendEmail\">\n        推送邮件\n      </el-button>\n    </m-top-handle>\n    <el-table\n      :data=\"tableData\"\n      border\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"index\" label=\"序号\" width=\"50\"></el-table-column>\n      <el-table-column prop=\"_id\" label=\"id\"></el-table-column>\n      <el-table-column prop=\"avatarImg\" label=\"头像\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.avatarImg\" alt height=\"50\" />\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"nickName\" label=\"昵称\"></el-table-column>\n      <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\n      <el-table-column prop=\"url\" label=\"博客/github网址\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"90\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row)\">\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n    </el-table>\n    <el-dialog\n      title=\"上传文件\"\n      :visible.sync=\"dialogVisible\"\n      width=\"320px\"\n      center\n    >\n      <el-form :model=\"form\" :rules=\"formRules\" ref=\"form\">\n        <el-form-item props=\"sendContent\" label=\"发送内容\">\n          <el-input v-model=\"form.sendContent\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"sendhandle\">提交</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      tableData: [],\n      title: '',\n      multipleSelection: [],\n      emailArr: [],\n      form: {\n        sendContent: '',\n      },\n      formRules: {},\n      dialogVisible: false,\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    async getList() {\n      let res = await this.$http.get('/rest/users')\n      this.tableData = res.data\n    },\n    deleteHandle(data) {\n      this.$confirm(`是否确定要删除留言: ${data.nickName} ?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n      })\n        .then(async () => {\n          await this.$http.delete(`/rest/users/${data._id}`)\n          await this.getList()\n          this.$message({\n            type: 'success',\n            message: '删除成功!',\n          })\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除',\n          })\n        })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val.map((v) => {\n        return { email: v.email, subject: v.nickName }\n      })\n    },\n    async sendEmail() {\n      if (this.multipleSelection.length === 0) {\n        return this.$message.warning('请选一个')\n      }\n      this.dialogVisible = true\n    },\n    sendhandle() {\n      let promiseArr = []\n      this.multipleSelection.forEach((e) => {\n        let replyObj = {\n          recipient: e.email,\n          subject: e.subject,\n          html: this.form.sendContent,\n        }\n        promiseArr.push(this.$http.post('/email', replyObj))\n      })\n      Promise.all(promiseArr).then(() => {\n        this.dialogVisible = false\n      })\n      // .catch(err => {\n      //   this.dialogVisible = false;\n      // });\n    },\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./UserList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserList.vue?vue&type=template&id=78f02bbe&\"\nimport script from \"./UserList.vue?vue&type=script&lang=js&\"\nexport * from \"./UserList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}